def profile(request, username):
    user = get_object_or_404(User, username=username)
    is_following = False
    if request.user.is_authenticated and request.user != user:
        is_following = UserFollowing.objects.filter(user=request.user, following_user=user).exists()
    followers_count = UserFollowing.objects.filter(following_user=user).count()
    following_count = UserFollowing.objects.filter(user=user).count()
    return render(request, 'base/profile.html', {
        'user': user,
        'is_following': is_following,
        'followers_count': followers_count,
        'following_count': following_count,
    })
